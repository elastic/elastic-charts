import { Meta, Story } from "@storybook/addon-docs/blocks";
import { boolean, color, number, select } from '@storybook/addon-knobs';
import {
  Chart,
  BarSeries,
  getSpecId,
  ScaleType,
  DARK_THEME,
  LIGHT_THEME,
  Settings,
  Axis,
  getAxisId,
  Position,
  timeFormatter,
  niceTimeFormatByDay,
} from '../src';
import { KIBANA_METRICS } from '../src/utils/data_samples/test_dataset_kibana';

<Meta title="Bar Charts/With Axis" />

# Bar chart with axis 

This chart now includes x and y axes. These axes can be `linear`, `ordinal` or `time`. 

<Chart className={'story-chart'}>
    <Settings theme={LIGHT_THEME} />
    <Axis id={getAxisId('bottom')} position={Position.Bottom} title={'Bottom axis'} showOverlappingTicks={true} />
    <Axis
    id={getAxisId('left2')}
    title={'Left axis'}
    position={Position.Left}
    tickFormat={(d) => Number(d).toFixed(2)}
    />
    <BarSeries
    id={getSpecId('bars')}
    xScaleType={ScaleType.Linear}
    yScaleType={ScaleType.Linear}
    xAccessor="x"
    yAccessors={['y']}
    data={[
        { x: 0, y: 2 },
        { x: 1, y: 7 },
        { x: 2, y: 3 },
        { x: 3, y: 6 },
    ]}
    />
</Chart>

***
## Code for the bar chart with axes
    <Chart className={'story-chart'}>
        <Settings theme={LIGHT_THEME} />
        <Axis id={getAxisId('bottom')} position={Position.Bottom} title={'Bottom axis'} showOverlappingTicks={true} />
        <Axis
        id={getAxisId('left2')}
        title={'Left axis'}
        position={Position.Left}
        tickFormat={(d:any) => Number(d).toFixed(2)}
        />
        <BarSeries
        id={getSpecId('bars')}
        xScaleType={ScaleType.Linear}
        yScaleType={ScaleType.Linear}
        xAccessor="x"
        yAccessors={['y']}
        data={[
            { x: 0, y: 2 },
            { x: 1, y: 7 },
            { x: 2, y: 3 },
            { x: 3, y: 6 },
        ]}
        />
    </Chart>

And below is an example of an ordinal x axis bar chart
```
<Chart className={'story-chart'}>
    <Axis id={getAxisId('bottom')} position={Position.Bottom} title={'Bottom axis'} showOverlappingTicks={true} />
    <Axis
    id={getAxisId('left2')}
    title={'Left axis'}
    position={Position.Left}
    tickFormat={(d) => Number(d).toFixed(2)}
    />

    <BarSeries
    id={getSpecId('bars')}
    xScaleType={ScaleType.Ordinal}
    yScaleType={ScaleType.Linear}
    xAccessor="x"
    yAccessors={['y']}
    <pre>
    data={[
        { x: 'a', y: 2 },
        { x: 'b', y: 7 },
        { x: 'c', y: 3 },
        { x: 'd', y: 6 },
    ]}
    />
</Chart>
```

Here is an example of a time x axis
```
<Chart className={'story-chart'}>
    <Settings debug={boolean('debug', false)} />
    <Axis
        id={getAxisId('bottom')}
        position={Position.Bottom}
        title={'Bottom axis'}
        showOverlappingTicks={boolean('showOverlappingTicks bottom axis', false)}
        showOverlappingLabels={boolean('showOverlappingLabels bottom axis', false)}
        tickFormat={timeFormatter(niceTimeFormatByDay(1))}
    />
    <Axis
        id={getAxisId('left2')}
        title={'Left axis'}
        position={Position.Left}
        tickFormat={(d) => Number(d).toFixed(2)}
    />

    <BarSeries
        id={getSpecId('bars')}
        xScaleType={ScaleType.Time}
        yScaleType={ScaleType.Linear}
        xAccessor={0}
        yAccessors={[1]}
        data={KIBANA_METRICS.metrics.kibana_os_load[0].data}
    />
</Chart>
```

***
## Prop Table for the basic bar chart with axis 
In addition to the basic bar chart props (shown below), the bar chart with axes includes these additional props from the `Settings` and `Axis` components

| Prop | Type | Default | Note |
|:------|:------:|:---------:|:------|
| id  `(required)` | `AxisId or string` |  | The id of the spec |
| name | `string` | | The name or label of the spec |
| xScaleType `(required)`| `ScaleType (ScaleType.Ordinal or ScaleType.Linear or ScaleType.Time)` | `ScaleType.Ordinal` | The x axis scale type |
| yScaleType `(required)`| string[] scaleContinuousType | `ScaleType.Linear` | The y axis scale type |
| xAccessor `(required)`| Accessor |  | The field name of the x value on Datum object |
| yAccessors `(required)`| Accessor[] |  | An array of field names one per y metric value |
| data `(required)` | datum[] |  | An array of data |



### Settings Prop Table 
| Prop | Type | Default | Note |
|:------|:------:|:---------:|:------|
| theme | ParitalTheme or PartialTheme[] | `LIGHT_THEME`  |Partial theme to be merged with base or an array of partial themes to be merged with the base. Index `0` being the highest priority  |
| baseTheme| Theme | `LIGHT_THEME`  |Full default theme to use as base |
| rendering `(required)` | Rendering  |`canvas`  |  |
| rotation `(required)` | Rotation | `0` |  |
| animateData `(required)` | boolean |true | |
| showLegend `(required)` | boolean |false|
| tooltip `(required)` | TooltipType or TooltipProps | | Either a TooltipType or an object with configuration of type, snap, and/or headerFormatter |
| debug `(required)`| boolean | | | 
| legendPosition `(required)`| | Position.Right ||
| showLegendDisplayValue `(required)`| boolean | `true` ||
| hideDuplicateAxes `(required)`| boolean | `false`| removes duplicate axes, compares title, position and first and last tick labels| 


### Axis Prop Table 
| Prop | Type | Default | Note |
|:------|:------:|:---------:|:------|
| chartType `(required)` | `typeof ChartTypes.XYAxis` | ChartTypes.XYAxis  |  |
| specType `(required)` | `typeof SpecTypes.Axis` |  |  |
| groupId`(required)` | GroupId | `__global__`  | The ID of the axis group, generated via getGroupId method  |
| hide `(required)` |boolean  | false  | Hide this axis |
| showOverlappingTicks `(required)` | boolean | false  | Shows all ticks, also the one from the overlapping labels   |
| showOverlappingLabels`(required)` | boolean  | false  | Shows all labels, also the overlapping ones |
| position `(required)`|  | Position.Left | Where the axis appear on the chart |
| tickSize  `(required)`| number | 10 | The length of the tick line |
| tickPadding `(required)`| number | 10 | The padding between the label and the tick |
| tickFormat `(required)`| `function` | `(tick: any) => ${tick}`| A function called to format each single tick label|
| tickLabelRotation `(required)`| number | `0`| The degrees of rotation of the tick labels|
